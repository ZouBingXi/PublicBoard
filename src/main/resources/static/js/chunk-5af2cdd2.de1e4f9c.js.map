{"version":3,"sources":["webpack:///./src/views/PersonalInfoPage.vue?09c3","webpack:///./src/components/ChangeEmail.vue?6920","webpack:///./src/views/PersonalInfoPage.vue","webpack:///./src/components/ChangeEmail.vue","webpack:///./src/components/ChangeEmail.vue?44e7","webpack:///./src/components/ChangePassword.vue","webpack:///./src/components/ChangePassword.vue?d425","webpack:///./src/components/ChangeUserName.vue","webpack:///./src/components/ChangeUserName.vue?2474","webpack:///./src/views/PersonalInfoPage.vue?92e8","webpack:///./src/components/ChangeUserName.vue?e60c","webpack:///./src/components/ChangePassword.vue?3a5b"],"names":["class","style","show-file-list","http-request","myupload","before-upload","beforeAvatarUpload","src","currentUser","headimage","shape","fit","size","username","showChangeUserName","to","list","item","key","title","value","canEdit","show","flag","showChangeEmail","showChangePassword","model","ChangeEmailForm","rules","ref","label-position","label","prop","email","maxlength","placeholder","code","append","getcode","disabled","buttonDisabled","buttonText","ChangeEmail","type","$emit","name","data","timeToSend","required","message","trigger","pattern","min","max","methods","this","$refs","validate","then","body","$axios","post","console","log","success","$store","dispatch","error","msg","validateField","err","get","setTimer","timer","setInterval","clearInterval","computed","__exports__","changePasswordForm","ChangePassword","oldPassword","show-password","newPassword","confirmPassword","checkpassword","rule","callback","Error","validator","changeUsernameForm","ChangeName","newName","formData","FormData","re","components","ChangeUserName","headimg","userid","usertype","banstate","context","file","isJPG","isLt2M","$message","render"],"mappings":"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","file":"js/chunk-5af2cdd2.de1e4f9c.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./PersonalInfoPage.vue?vue&type=style&index=0&id=f4758828&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ChangeEmail.vue?vue&type=style&index=0&id=66eecf7d&lang=scss\"","<template>\r\n  <div class=\"headerContain\">\r\n    <div class=\"banner\"> </div>\r\n    <div class=\"whiteBackground myShadow\">\r\n\r\n      <el-upload\r\n          class=\"avatar\"\r\n          :show-file-list=\"false\"\r\n          :http-request=\"myupload\"\r\n          :before-upload=\"beforeAvatarUpload\">\r\n        <el-avatar :src=\"this.currentUser.headimage\" shape=\"square\" fit=\"contain\" :size=\"160\" style=\"border-radius: 20px;\"></el-avatar>\r\n        <div class=\"avatar-icon\">\r\n          <i class=\"el-icon-camera-solid\" style=\"font-size: 40px;margin-top: 40px\"></i>\r\n          <p>修改我的头像</p>\r\n        </div>\r\n      </el-upload>\r\n      <div class=\"infoContain\">\r\n        <div class=\"info\" style=\"border-bottom: none\">\r\n          <span class=\"username\">{{ this.currentUser.username}}</span>\r\n          <span class=\"link\" @click=\"showChangeUserName=!showChangeUserName\">编辑</span>\r\n          <router-link :to=\"{path:'/personalpage'}\" class=\"link\" style=\"float: right;margin-top: 21px;text-decoration: none\">返回我的主页></router-link>\r\n        </div>\r\n        <div v-for=\"item in list\" class=\"info\" :key=\"item.title\">\r\n          <p class=\"infoTitle\">{{ item.title }}</p>\r\n          <span class=\"infoValue\">{{ item.value }}</span>\r\n          <span v-if=\"item.canEdit\" class=\"editLink\" @click=\"show(item.flag)\">编辑</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <ChangeEmail v-if=\"showChangeEmail\" @exit=\"showChangeEmail=false\"></ChangeEmail>\r\n    <ChangePassword v-if=\"showChangePassword\"  @exit=\"showChangePassword=false\"></ChangePassword>\r\n    <ChangeUserName  v-if=\"showChangeUserName\"  @exit=\"showChangeUserName=false\"></ChangeUserName>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ChangeEmail from \"../components/ChangeEmail\";\r\nimport ChangePassword from \"../components/ChangePassword\";\r\nimport ChangeUserName from \"../components/ChangeUserName\";\r\n\r\nimport headimg from \"../assets/headimage.png\"\r\n\r\nimport {mapGetters} from \"vuex\";\r\nimport {GET_USER_INFO} from \"../store/actions.type\";\r\n\r\nexport default {\r\n  name: \"PersonalSettingPage\",\r\n  components:{\r\n    ChangeEmail,\r\n    ChangePassword,\r\n    ChangeUserName\r\n  },\r\n  data() {\r\n    return {\r\n      headimg: headimg,\r\n      showChangeEmail:false,\r\n      showChangePassword:false,\r\n      showChangeUserName:false,\r\n    }\r\n  },\r\n  computed: {\r\n    list() {\r\n      return [\r\n        {title: '用户ID', value: this.currentUser.userid},\r\n        {title: '邮箱', value: this.currentUser.email,canEdit:true,flag:'showChangeEmail'},\r\n        {title: '密码', value: '已设置',canEdit:true,flag:'showChangePassword'},\r\n        {title: '用户类型', value: this.currentUser.usertype},\r\n        {title: '状态', value: this.currentUser.banstate},\r\n      ]\r\n    },\r\n    ...mapGetters(['currentUser'])\r\n  },\r\n  methods:{\r\n    myupload(context){\r\n      console.log(context);\r\n      let formData = new FormData();\r\n      formData.append(\"avatar\",context.file);\r\n      this.$axios.post(\"user/updateprofile\",formData)\r\n          .then(re=>\r\n          {\r\n            console.log(re);\r\n            this.$store.dispatch(GET_USER_INFO);\r\n          });\r\n    },\r\n    beforeAvatarUpload(file) {\r\n      const isJPG = file.type === 'image/jpeg';\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n      if (!isJPG) {\r\n        this.$message.error('上传头像图片只能是 JPG');\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error('上传头像图片大小不能超过 2MB!');\r\n      }\r\n      return isJPG && isLt2M;\r\n    },\r\n    show(flag){\r\n      this[flag]=!this[flag]\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.headerContain{\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n  .banner{\r\n    height: 250px;\r\n    background-image: url(\"../assets/personalPageImg.png\");\r\n    background-size: cover;\r\n    background-position:center center ;\r\n  }\r\n\r\n  .whiteBackground {\r\n    position: relative;\r\n    width: 1000px;\r\n    height: 760px;\r\n    background: white;\r\n    margin: auto;\r\n    .avatar {\r\n      position: absolute;\r\n      left: 29px;\r\n      top: -32px;\r\n      .avatar-icon{\r\n        color: white;\r\n        position: absolute;\r\n        top: 0px;\r\n        left: 0px;\r\n        width: 160px;\r\n        height: 160px;\r\n        background: black;\r\n        opacity: 0;\r\n        border-radius: 20px;\r\n        &:hover{\r\n          opacity: 0.5;\r\n        }\r\n      }\r\n    }\r\n    .link{\r\n      display: inline-block;\r\n      overflow: hidden;\r\n      font-size: 18px;\r\n      color: black;\r\n      line-height: 40px;\r\n      margin-left: 37px;\r\n      text-decoration: underline;\r\n      cursor: pointer;\r\n    }\r\n    .username {\r\n      display: inline-block;\r\n      overflow: hidden;\r\n      font-weight: bold;\r\n      font-size: 40px;\r\n      line-height: 60px;\r\n    }\r\n\r\n    .userid {\r\n      position: absolute;\r\n      left: 221px;\r\n      top: 52px;\r\n      margin: 0px;\r\n      font-size: 21px;\r\n      line-height: 29px;\r\n      font-weight: 300;\r\n    }\r\n    .infoContain{\r\n      position: absolute;\r\n      left: 220px;\r\n      top: 55px;\r\n      .info{\r\n        width: 735px;\r\n        margin-bottom: 30px;\r\n        font-size: 20px;\r\n        line-height: 20px;\r\n        border-bottom: #dddddd 1px solid;\r\n        .infoTitle{\r\n          font-weight: bold;\r\n          margin: 0px 0px 25px;\r\n        }\r\n        .infoValue{\r\n          display: inline-block;\r\n          line-height: 20px;\r\n          margin: 0px 0px 25px;\r\n        }\r\n        .editLink{\r\n          display: inline-block;\r\n          line-height: 20px;\r\n          float: right;\r\n          text-decoration: underline;\r\n          cursor: pointer;\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n}\r\n\r\n</style>","<template>\r\n  <div class=\"changeEmailPage\">\r\n    <div class=\"transparentBackground\">\r\n    </div>\r\n    <div class=\"Box\">\r\n      <h1 class=\"TitleText\">修改邮箱</h1>\r\n      <el-form :model=\"ChangeEmailForm\" :rules=\"rules\" ref=\"ChangeEmailForm\" label-position=\"top\">\r\n        <el-form-item label=\"新邮箱：\" prop=\"email\">\r\n          <el-input v-model=\"ChangeEmailForm.email\" maxlength=\"30\" placeholder=\"请输入新邮箱\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"验证码：\" prop=\"code\">\r\n          <el-input v-model=\"ChangeEmailForm.code\" maxlength=\"6\" placeholder=\"请输入验证码\">\r\n            <template #append>\r\n              <el-button @click=\"getcode\" :disabled=\"buttonDisabled\">{{ buttonText }}</el-button>\r\n            </template>\r\n          </el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <el-button @click=\"ChangeEmail\" type=\"primary\">确定</el-button>\r\n      <el-button @click=\"this.$emit('exit')\" type=\"primary\">取消</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {ElMessage} from \"element-plus\";\r\nimport {GET_USER_INFO} from \"../store/actions.type\";\r\n\r\nexport default {\r\n  name: \"ChangeEmail\",\r\n  data(){\r\n    return{\r\n      ChangeEmailForm:{\r\n        email:'',\r\n        code:''\r\n      },\r\n      buttonDisabled:false,\r\n      timeToSend:null,\r\n      rules:{\r\n        email: [\r\n          { required: true,message:'请输入邮箱', trigger: 'blur'},\r\n          {\r\n            required: true,\r\n            pattern:/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/,\r\n            message:'请检查邮箱格式',\r\n            trigger: 'blur'\r\n          },\r\n        ],\r\n        code: [\r\n          { required: true, message: '请输入验证码', trigger: 'blur'},\r\n          { min: 6, max: 6, message: '验证码为6位',trigger: 'blur'},\r\n          /*{validator:showError,trigger: 'blur'}*/\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods:{\r\n    ChangeEmail(){\r\n      this.$refs['ChangeEmailForm'].validate().then(()=>{\r\n        var body={\r\n          email:this.ChangeEmailForm.email,\r\n          code:this.ChangeEmailForm.code\r\n        }\r\n        this.$axios.post('/user/changeemail',body).then(({data})=>{\r\n          if(data.code==200){\r\n            console.log(\"修改邮箱成功\",data);\r\n            ElMessage.success('修改邮箱成功');\r\n            this.$store.dispatch(GET_USER_INFO);\r\n            this.$emit('exit');\r\n          }\r\n          else{\r\n            console.log(\"修改失败\",data);\r\n            ElMessage.error(data.msg)\r\n          }\r\n        })\r\n      })\r\n    },\r\n    getcode() {\r\n      this.$refs['ChangeEmailForm'].validateField('email',(err)=>{\r\n        if(!err){\r\n          this.$axios.get('/user/sendcode?flag=noexist&to='+this.ChangeEmailForm.email)\r\n              .then(({data})=>{\r\n                if(data.code==200)\r\n                  this.setTimer();\r\n                else\r\n                  ElMessage.error(data.msg)\r\n              })\r\n        }\r\n      })\r\n    },\r\n\r\n    /*发送验证码后，设置计时器30s*/\r\n    setTimer() {\r\n      this.buttonDisabled = true;\r\n      this.timeToSend = 30;\r\n      let timer = setInterval(() => {\r\n        if (this.timeToSend == 1) {\r\n          clearInterval(timer);\r\n          this.buttonDisabled = false;\r\n        } else {\r\n          this.timeToSend--;\r\n        }\r\n      }, 1000)\r\n    },\r\n  },\r\n  computed:{\r\n    /*返回验证码按钮显示文本信息*/\r\n    buttonText(){\r\n      if(this.buttonDisabled)\r\n        return this.timeToSend+'秒后重新发送';\r\n      else\r\n        return '点击发送验证码';\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.changeEmailPage{\r\n  .Box {\r\n    position: fixed;\r\n    top:calc(50% - 194px);\r\n    left:calc(50% - 230px);\r\n\r\n    width: 400px;\r\n    padding: 60px;\r\n    border-radius: 20px;\r\n\r\n    background: white;\r\n    font-weight:bold;\r\n\r\n    .TitleText{\r\n      font-size: 35px;\r\n      line-height: 35px;\r\n      margin: 0px 0px 50px;\r\n    }\r\n\r\n    .el-form-item {\r\n      margin-top: 23px;\r\n      margin-bottom: 0px;\r\n\r\n      .el-form-item__label {\r\n        font-size: 18px;\r\n        line-height: 18px;\r\n      }\r\n    }\r\n\r\n    .el-button--primary{\r\n      margin-top: 30px;\r\n      line-height: 30px;\r\n      width:195px;\r\n      font-size: 24px;\r\n      background: #333333;\r\n      border: #333333;\r\n      border-radius: 10px;\r\n    }\r\n  }\r\n}\r\n\r\n</style>","import { render } from \"./ChangeEmail.vue?vue&type=template&id=66eecf7d\"\nimport script from \"./ChangeEmail.vue?vue&type=script&lang=js\"\nexport * from \"./ChangeEmail.vue?vue&type=script&lang=js\"\n\nimport \"./ChangeEmail.vue?vue&type=style&index=0&id=66eecf7d&lang=scss\"\n\nimport exportComponent from \"D:\\\\邹秉禧\\\\程序项目\\\\PublicBoard\\\\PublicBoardFrontend\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"changePassword\">\r\n    <div class=\"transparentBackground\">\r\n    </div>\r\n    <div class=\"Box\">\r\n      <h1 class=\"TitleText\">修改密码</h1>\r\n      <el-form :model=\"changePasswordForm\" :rules=\"rules\" ref=\"changePasswordForm\" label-position=\"top\" @keypress.enter=\"ChangePassword\">\r\n        <el-form-item label=\"原密码：\" prop=\"oldPassword\">\r\n          <el-input v-model=\"changePasswordForm.oldPassword\" maxlength=\"20\" placeholder=\"请输入原密码\" show-password></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"新密码：\" prop=\"newPassword\">\r\n          <el-input v-model=\"changePasswordForm.newPassword\" maxlength=\"20\" placeholder=\"请输入新密码\" show-password></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"确认密码：\" prop=\"confirmPassword\">\r\n          <el-input v-model=\"changePasswordForm.confirmPassword\" maxlength=\"20\" placeholder=\"请再次输入密码\" show-password></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <el-button @click=\"ChangePassword\" type=\"primary\">确定</el-button>\r\n      <el-button @click=\"this.$emit('exit')\" type=\"primary\">取消</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {ElMessage} from \"element-plus\";\r\n\r\nexport default {\r\n  name: \"changePassword\",\r\n  data() {\r\n    const checkpassword=(rule,value,callback)=>{\r\n      if(this.changePasswordForm.newPassword===value)\r\n        callback();\r\n      else\r\n        callback(new Error(\"两次密码不一致\"));\r\n    }\r\n    return {\r\n      changePasswordForm: {\r\n        oldPassword: '',\r\n        newPassword: '',\r\n        confirmPassword: ''\r\n      },\r\n      rules: {\r\n        oldPassword: [\r\n          {required: true, message: '请输入原密码', trigger: 'blur'}\r\n        ],\r\n        newPassword: [\r\n          {required: true, message: '请输入新密码', trigger: 'blur'},\r\n          {\r\n            pattern: /(?=.*[0-9])(?=.*[a-zA-Z]).{6,20}/,\r\n            message: '密码中必须包含字母、数字，至少6个字符，最多20个字符。',\r\n            trigger: 'blur'\r\n          }\r\n        ],\r\n        confirmPassword: [\r\n          {required: true, validator: checkpassword, trigger: 'blur'},\r\n        ],\r\n      }\r\n    }\r\n  },\r\n  methods:{\r\n    ChangePassword(){\r\n      this.$refs['changePasswordForm'].validate().then(()=>{\r\n        var body={\r\n          oldPassword:this.changePasswordForm.oldPassword,\r\n          newPassword:this.changePasswordForm.newPassword\r\n        }\r\n        this.$axios.post('/user/changepassword',body).then(({data})=>{\r\n          if(data.code==200){\r\n            console.log(\"修改密码成功\",data);\r\n            ElMessage.success('修改密码成功');\r\n            this.$emit('exit');\r\n          }\r\n          else{\r\n            console.log(\"修改失败\",data);\r\n            ElMessage.error(data.msg)\r\n          }\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.changePassword{\r\n  .Box {\r\n    position: fixed;\r\n    top:calc(50% - 270px);\r\n    left:calc(50% - 230px);\r\n\r\n    width: 400px;\r\n    padding: 60px;\r\n    border-radius: 20px;\r\n\r\n    background: white;\r\n    font-weight:bold;\r\n\r\n    .TitleText{\r\n      font-size: 35px;\r\n      line-height: 35px;\r\n      margin: 0px 0px 50px;\r\n    }\r\n\r\n    .el-form-item {\r\n      margin-top: 23px;\r\n      margin-bottom: 0px;\r\n\r\n      .el-form-item__label {\r\n        font-size: 18px;\r\n        line-height: 18px;\r\n      }\r\n    }\r\n\r\n    .el-button--primary{\r\n      margin-top: 30px;\r\n      line-height: 30px;\r\n      width:195px;\r\n      font-size: 24px;\r\n      background: #333333;\r\n      border: #333333;\r\n      border-radius: 10px;\r\n    }\r\n  }\r\n}\r\n\r\n</style>","import { render } from \"./ChangePassword.vue?vue&type=template&id=bb61f3d0\"\nimport script from \"./ChangePassword.vue?vue&type=script&lang=js\"\nexport * from \"./ChangePassword.vue?vue&type=script&lang=js\"\n\nimport \"./ChangePassword.vue?vue&type=style&index=0&id=bb61f3d0&lang=scss\"\n\nimport exportComponent from \"D:\\\\邹秉禧\\\\程序项目\\\\PublicBoard\\\\PublicBoardFrontend\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"changeUsername\">\r\n    <div class=\"transparentBackground\">\r\n    </div>\r\n    <div class=\"Box\">\r\n      <h1 class=\"TitleText\">修改用户名</h1>\r\n      <el-form :model=\"changeUsernameForm\" :rules=\"rules\" ref=\"changeUsernameForm\" label-position=\"top\" @keypress.enter=\"ChangeName\">\r\n        <el-form-item label=\"新用户名：\" prop=\"newName\">\r\n          <el-input v-model=\"changeUsernameForm.newName\" maxlength=\"20\" placeholder=\"请输入新用户名\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <el-button @click=\"ChangeName\" type=\"primary\">确定</el-button>\r\n      <el-button @click=\"this.$emit('exit')\" type=\"primary\">取消</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {GET_USER_INFO} from \"../store/actions.type\";\r\n\r\nexport default {\r\n  name: \"changePassword\",\r\n  data() {\r\n    return {\r\n      changeUsernameForm: {\r\n        newName:''\r\n      },\r\n      rules: {\r\n        newName: [\r\n          {required: true, message: '请输入用户名', trigger: 'blur'}\r\n        ],\r\n      }\r\n    }\r\n  },\r\n  methods:{\r\n    ChangeName(){\r\n      this.$refs['changeUsernameForm'].validate().then(()=>{\r\n        let formData = new FormData();\r\n        formData.append('username',this.changeUsernameForm.newName);\r\n        this.$axios.post(\"user/updateprofile\",formData)\r\n            .then(re=>\r\n            {\r\n              console.log(re);\r\n              this.$store.dispatch(GET_USER_INFO);\r\n              this.$emit('exit');\r\n            });\r\n      })\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.changeUsername{\r\n  .Box {\r\n    position: fixed;\r\n    top:calc(50% - 150px);\r\n    left:calc(50% - 230px);\r\n\r\n    width: 400px;\r\n    padding: 60px;\r\n    border-radius: 20px;\r\n\r\n    background: white;\r\n    font-weight:bold;\r\n\r\n    .TitleText{\r\n      font-size: 35px;\r\n      line-height: 35px;\r\n      margin: 0px 0px 50px;\r\n    }\r\n\r\n    .el-form-item {\r\n      margin-top: 23px;\r\n      margin-bottom: 0px;\r\n\r\n      .el-form-item__label {\r\n        font-size: 18px;\r\n        line-height: 18px;\r\n      }\r\n    }\r\n\r\n    .el-button--primary{\r\n      margin-top: 30px;\r\n      line-height: 30px;\r\n      width:195px;\r\n      font-size: 24px;\r\n      background: #333333;\r\n      border: #333333;\r\n      border-radius: 10px;\r\n    }\r\n  }\r\n}\r\n\r\n</style>","import { render } from \"./ChangeUserName.vue?vue&type=template&id=195a5b7e\"\nimport script from \"./ChangeUserName.vue?vue&type=script&lang=js\"\nexport * from \"./ChangeUserName.vue?vue&type=script&lang=js\"\n\nimport \"./ChangeUserName.vue?vue&type=style&index=0&id=195a5b7e&lang=scss\"\n\nimport exportComponent from \"D:\\\\邹秉禧\\\\程序项目\\\\PublicBoard\\\\PublicBoardFrontend\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./PersonalInfoPage.vue?vue&type=template&id=f4758828&scoped=true\"\nimport script from \"./PersonalInfoPage.vue?vue&type=script&lang=js\"\nexport * from \"./PersonalInfoPage.vue?vue&type=script&lang=js\"\n\nimport \"./PersonalInfoPage.vue?vue&type=style&index=0&id=f4758828&scoped=true&lang=scss\"\n\nimport exportComponent from \"D:\\\\邹秉禧\\\\程序项目\\\\PublicBoard\\\\PublicBoardFrontend\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f4758828\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ChangeUserName.vue?vue&type=style&index=0&id=195a5b7e&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ChangePassword.vue?vue&type=style&index=0&id=bb61f3d0&lang=scss\""],"sourceRoot":""}